@PACKAGE_INIT@

set(websocketserver_DEPENDENCIES websocketbase http)
wet(websocketclient DEPENDENCIES websocketbase http)
set(express_DEPENDENCIES http)
set(http_DEPENDENCIES net-ip)
set(net-ip_DEPENDENCIES net-legacy net-tls)
set(net-legacy_DEPENDENCIES net)
set(net-tls_DEPENDENCIES net)
set(net-bt DEPENDENCIES net-legacy net-tls)
set(net_DEPENDENCIES utils logger)

macro(LOAD_COMPONENT_WITH_DEPENDENCIES _comp)
    message("Loading component: " ${_comp})
    foreach(_depcomp ${${_comp}_DEPENDENCIES})
        if(${${_depcomp}_LOADED})
            message("  " ${_comp} " depends on " ${_depcomp}
                    " ... already loaded"
            )
        else()
            message("  " ${_comp} " depends on " ${_depcomp} " ... loading")
            load_component_with_dependencies(${_depcomp})
        endif()
    endforeach()
    include("${CMAKE_CURRENT_LIST_DIR}/snodec${_comp}Targets.cmake")
    set(${_comp}_LOADED true)
endmacro()

set(_supported_components
    net
    net-legacy
    net-tls
    net-ip
    net-bt
    http
    express
    websocketserver
    websocketclient
)

foreach(_comp ${snodec_FIND_COMPONENTS})
    if(NOT _comp IN_LIST _supported_components)
        set(snodec_FOUND False)
        set(snodec_NOT_FOUND_MESSAGE "Unsupported component: ${_comp}")
    else()
        load_component_with_dependencies(${_comp})
    endif()
endforeach()
